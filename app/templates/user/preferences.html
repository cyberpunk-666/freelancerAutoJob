{% extends 'layout/layout.html' %}
{% from 'components/form_macros.html' import render_form_field %}

{% block content %}
<h1>User Preferences</h1>
<form method="post">
    {% for category, prefs in preferences_by_category.items() %}
        <h2>{{ category }}</h2>
        {% for pref in prefs %}
            {{ render_form_field(pref, user_preferences.get(pref.key)) }}
        {% endfor %}
    {% endfor %}
    <button type="submit" class="btn btn-primary">Save Preferences</button>
</form>
{% endblock %}
